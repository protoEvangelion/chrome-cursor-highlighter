/* ---------- Scaling ---------- */

@mixin font-size($size, $min, $max: false, $fallback: false) {
  @include scale(font-size, $size, $min, $max, $fallback);
}

@mixin height($height, $min, $max: false, $fallback: false) {
  @include scale(height, $height, $min, $max, $fallback);
}

@mixin margin($margin, $min, $max: false, $fallback: false) {
  @include scale(margin, $margin, $min, $max, $fallback);
}

@mixin padding($padding, $min, $max: false, $fallback: false) {
  @include scale(padding, $padding, $min, $max, $fallback);
}

@mixin scale($prop, $value, $min, $max: false, $fallback: false) {
  $valueUnitless: strip-unit($value);

  $maxBreakpoint: ($max / $valueUnitless) / ($baseUnitless / 100);
  $minBreakpoint: ($min / $valueUnitless) / ($baseUnitless / 100);

  @media (max-width: $minBreakpoint) {
    #{$prop}: $min;
  }

  @if $max {
    @media (min-width: #{$maxBreakpoint}) {
      #{$prop}: $max;
    }
  }

  @if $fallback {
    #{$prop}: $fallback;
  }

  #{$prop}: $value;
}

@mixin width($width, $min, $max: false, $fallback: false) {
  @include scale(width, $width, $min, $max, $fallback);
}

%small-caps {
  font-weight: $fontWeightSemiBold;
  text-transform: uppercase;

  @include font-size(0.8rem, 13px);
  @include scale(letter-spacing, 0.0625em, 1px);
}

// Deprecated
$breakpoint_phone: 768px !default;
$breakpoint_tablet: 980px !default;

@mixin respond-to($types...) {
  $maxWidth: -1;
  $minWidth: -1;

  @each $type in $types {
    @if $type == phone {
      $maxWidth: if($maxWidth == -1, $breakpoint_phone - 1, $maxWidth);
      $minWidth: 0;
    } @else if $type == tablet {
      @if $maxWidth != 0 {
        $maxWidth: if(
          $maxWidth == -1,
          $breakpoint_tablet - 1,
          max($breakpoint_tablet - 1, $maxWidth)
        );
      }

      $minWidth: if($minWidth == -1, $breakpoint_phone, min($breakpoint_phone, $minWidth));
    } @else if $type == desktop {
      $maxWidth: 0;
      $minWidth: if($minWidth == -1, $breakpoint_tablet, $minWidth);
    }
  }

  @if $maxWidth <= 0 and $minWidth <= 0 {
    @content;
  } @else if $maxWidth <= 0 {
    @media (min-width: $minWidth) {
      @content;
    }
  } @else if $minWidth <= 0 {
    @media (max-width: $maxWidth) {
      @content;
    }
  } @else {
    @media (min-width: $minWidth) and (max-width: $maxWidth) {
      @content;
    }
  }
}
